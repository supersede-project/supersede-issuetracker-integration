<html>
<head>
<script>
	AJS.$(document).ready(function() {
		// 		require(['aui/inline-dialog2']);
		onPageLoad();
	});

	function onPageLoad() {
		$(".toEnable").prop('disabled', true);
		var selectionString = '';
		var issuesSelectionString = '';

		jQuery('.check-alerts').click(
				function() {
					var self = jQuery(this);
					jQuery.ajax({
						type : "get",
						url : "supersede-alerts?refreshAlerts=y",
						success : function(data) {
							console.log('dom', self, data);
							$("#data").html(data);
							// self.parent().parent().remove();
							AJS.tablessortable.setTableSortable(AJS
									.$(".sortableTable"));
							onPageLoad();
						},
						error : function() {
							console.log('error', arguments);
						}
					});
				});

		jQuery('.searchBtn')
				.click(
						function() {
							var self = jQuery(this);
							var searchStr = $('#searchAlertsInput').val();
							if (!searchStr) {
								searchStr = "";
							}
							jQuery
									.ajax({
										type : "get",
										url : "supersede-alerts?searchAlerts=y&searchAlertsInput="
												+ searchStr,
										success : function(data) {
											console.log('dom', self, data);
											$("#data").html(data);
											// self.parent().parent().remove();
											AJS.tablessortable
													.setTableSortable(AJS
															.$(".sortableTable"));
											onPageLoad();
										},
										error : function() {
											console.log('error', arguments);
										}
									});
						});

		jQuery("#searchAlertsInput").keyup(function(event) {
			if (event.keyCode == 13) {
				$(".searchBtn").click();
			}
		});

		jQuery('.chkSelected').click(
				function() {
					if ($(this).prop('checked')) {
						// Write a string containing the IDs of selected
						// alerts
						selectionString += $(this).attr('id');
						selectionString += '$separator';
						$(".toEnable").prop('disabled', false);
						$(".toEnable").prop('enabled', true);
						// 						alert(selectionString);
					} else {
						// Remove the selected ID if checkbox gets unchecked
						selectionString = selectionString.replace($(this).attr(
								'id')
								+ '$separator', '');
						if (!selectionString) {
							$(".toEnable").prop('disabled', true);
							$(".toEnable").prop('enabled', false);
						}
					}
				});
		jQuery('.dialogChkSelected').click(
				function() {
					if ($(this).prop('checked')) {
						// Write a string containing the IDs of selected
						// alerts
						issuesSelectionString += $(this).attr('id');
						issuesSelectionString += '$separator';
						$(".toEnable").prop('disabled', false);
						$(".toEnable").prop('enabled', true);
					} else {
						// Remove the selected ID if checkbox gets unchecked
						issuesSelectionString = issuesSelectionString.replace(
								$(this).attr('id') + '$separator', '');
						if (!issueSelectionString) {
							$(".toEnable").prop('disabled', true);
							$(".toEnable").prop('enabled', false);
						}
					}
				});
		var opt = {
			autoOpen : false,
			modal : true,
			width : 550,
			height : 650,
			title : 'Details'
		};

		jQuery('.opener').click(function() {
			$("#dialog-1").dialog(opt).dialog("open");
		});

		jQuery('.alertManagement').click(function() {
			console.log('alert management');
			$(".selectionList").val(selectionString);
		});

		// Shows the dialog when the "Show dialog" button is clicked
		AJS.$("#dialog-show-button").click(function() {
			AJS.dialog2("#demo-dialog").show();
		});

		AJS.$("#dialog-delete-button").click(function() {
			AJS.dialog2("#delete-dialog").show();
		});

		// Hides the dialog
		AJS.$("#dialog-close-button").click(function(e) {
			e.preventDefault();
			AJS.dialog2("#demo-dialog").hide();
		});

		// DIALOG
		jQuery('.dialogButton').click(function() {
			console.log('alert management')
			$("#issuesSelectionList").val(issuesSelectionString);
		});

		// DIALOG
		jQuery('.dialogDeleteButton').click(function() {
			console.log('alert management')
			$("#selectionList").val(selectionString);
		});

		// DIALOG
		jQuery('.searchBtn').click(function() {
			$("#selectionList").val(selectionString);
		});

		// 		jQuery('.clickable-dialog').click(function() {
		// 			$(".clickable-dialog").prop('href', '#7');
		// 		});
	}
</script>
<meta name="decorator" content="atl.general">
$webResourceManager.requireResource("com.atlassian.auiplugin:dialog2") $webResourceManager.requireResource("com.atlassian.auiplugin:aui-experimental-table-sortable") $webResourceManager.requireResource("com.atlassian.auiplugin:aui-inline-dialog2")
<title>SUPERSEDE - Issue Manager</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body class="page-type-admin">
	<!--  parsing header -->
	#parse("/templates/general-header.vm")
	<div class="aui-page-panel" id="browse-issues-page">
		<div class="aui-page-panel-inner">
			<!-- parsing project list -->
			#parse("/templates/general-project-list.vm")
			<div id="data">#parse("/templates/content-supersede-alerts.vm")</div>
		</div>
	</div>

</body>
</html>